var player1,player2,lastTime1=0,lastTime2=0;function onYouTubeIframeAPIReady(){setupYouTubeEventListeners()}function setupYouTubeEventListeners(){document.addEventListener("click",(function(e){const o=e.target.closest("#openmodal1, .modal1"),t=e.target.closest("#openmodal2, .modal2"),r=e.target.closest("#modal1 .close-button-wrapper"),a=e.target.closest("#modal2 .close-button-wrapper");o?(console.log("Modal 1 Open Target Clicked:",o,"\nCalling handleModalOpen for player1."),handleModalOpen("player1","scIZq2PPzU0")):t?(console.log("Modal 2 Open Target Clicked:",t,"\nCalling handleModalOpen for player2."),handleModalOpen("player2","SKcxYIl-tT8")):r?(console.log("Modal 1 Close Target Clicked:",r),pauseAndDispatch("player1",player1,document.getElementById("modal1"),(function(){if("function"==typeof player1.getCurrentTime)try{lastTime1=player1.getCurrentTime()}catch(e){console.warn("Error getting current time for player1:",e)}}))):a&&(console.log("Modal 2 Close Target Clicked:",a),pauseAndDispatch("player2",player2,document.getElementById("modal2"),(function(){if("function"==typeof player2.getCurrentTime)try{lastTime2=player2.getCurrentTime()}catch(e){console.warn("Error getting current time for player2:",e)}})))}))}function handleModalOpen(e,o){if(!document.getElementById(e))return void console.error("Player div not found:",e);let t,r;if("player1"===e?(t=player1,r=lastTime1):(t=player2,r=lastTime2),t)if(console.log("Resuming existing player:",e),"function"==typeof t.seekTo&&"function"==typeof t.playVideo)try{t.seekTo(Math.floor(r||0)),t.playVideo()}catch(o){console.error("Error resuming player:",e,o)}else console.warn("Player exists but methods not available on resume attempt:",e);else{console.log("Creating new player:",e);var a=new YT.Player(e,{height:"100%",width:"100%",videoId:o,playerVars:{rel:0,modestbranding:1,autoplay:1,start:Math.floor(r||0)},events:{onReady:onPlayerReady,onError:onPlayerError}});"player1"===e?player1=a:player2=a}}function onPlayerReady(e){if(console.log("Player ready:",e.target.getIframe().id),e.target&&"function"==typeof e.target.playVideo)try{e.target.playVideo()}catch(o){console.error("Error calling playVideo in onPlayerReady for:",e.target.getIframe().id,o)}else console.warn("onPlayerReady: playVideo function not found for",e.target)}function onPlayerError(e){console.error("YouTube Player Error:",e.data,"for player:",e.target.getIframe().id),destroyPlayer(e.target.getIframe().id)}function destroyPlayer(e){let o="player1"===e?player1:player2;if(o&&"function"==typeof o.destroy)try{o.destroy(),console.log("Destroyed player:",e)}catch(o){console.error("Error destroying player:",e,o)}"player1"===e?(player1=null,lastTime1=0):(player2=null,lastTime2=0)}function loadYouTubeAPI(){if(window.YT)onYouTubeIframeAPIReady();else{var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(e,o)}}function pauseAndDispatch(e,o,t,r){if(o&&"function"==typeof o.pauseVideo)try{o.pauseVideo(),"function"==typeof r&&r(),setTimeout((function(){if(t){const o=new CustomEvent("youtube-modal-paused",{detail:{playerId:e}});t.dispatchEvent(o)}}),100)}catch(o){console.error(`Error pausing ${e}:`,o)}else console.warn(`Could not pause ${e} on close (not ready or does not exist).`),setTimeout((function(){if(t){const o=new CustomEvent("youtube-modal-paused",{detail:{playerId:e}});t.dispatchEvent(o)}}),100)}loadYouTubeAPI();